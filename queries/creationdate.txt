SELECT distinct 
    R.PROJECT_NAME,
    CountYes.Under30days,
    CountYes.Under60days,
    CountYes.Under90days,
    CountYes.Above90days
FROM SpiraTestEntities.R_Requirements AS R

LEFT JOIN(
    SELECT
	R2.PROJECT_NAME,
        SUM(CASE WHEN DiffDays(R2.CREATION_DATE,R2.LAST_UPDATE_DATE) < 30 THEN 1 ELSE 0 END) AS Under30days,
        SUM(CASE WHEN DiffDays(R2.CREATION_DATE,R2.LAST_UPDATE_DATE) > 31 AND DiffDays(R2.CREATION_DATE,R2.LAST_UPDATE_DATE) > 60 THEN 1 ELSE 0 END) AS Under60days,
        SUM(CASE WHEN DiffDays(R2.CREATION_DATE,R2.LAST_UPDATE_DATE) > 61 AND DiffDays(R2.CREATION_DATE,R2.LAST_UPDATE_DATE) > 90 THEN 1 ELSE 0 END) AS Under90days,
	SUM(CASE WHEN DiffDays(R2.CREATION_DATE,R2.LAST_UPDATE_DATE) < 90 THEN 1 ELSE 0 END) AS Above90days

    FROM SpiraTestEntities.R_Requirements AS R2
    where R2.IS_DELETED = False
    AND 
    R2.REQUIREMENT_STATUS_NAME = 'Developed'
    GROUP BY R2.PROJECT_NAME
) AS CountYes ON R.PROJECT_NAME = CountYes.PROJECT_NAME
WHERE
    R.IS_DELETED = False
    AND 
    R2.REQUIREMENT_STATUS_NAME = 'Developed'